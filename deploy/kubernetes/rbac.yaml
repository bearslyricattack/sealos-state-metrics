apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: sealos-state-metric
rules:
# Core resources
- apiGroups: [""]
  resources:
    - pods
    - nodes
    - secrets
    - configmaps
    - events
    - services
  verbs: [get, list, watch]

# Networking resources
- apiGroups: ["networking.k8s.io"]
  resources:
    - ingresses
  verbs: [get, list, watch]

# Leader election
- apiGroups: ["coordination.k8s.io"]
  resources:
    - leases
  verbs: [get, create, update, delete]

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: sealos-state-metric
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: sealos-state-metric
subjects:
- kind: ServiceAccount
  name: sealos-state-metric
  namespace: sealos-system
